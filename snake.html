<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Snake Game Sederhana</title>
    <style>
        /* --- CSS INTERNAL DIMULAI DI SINI --- */
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #2c3e50; /* Dark Blue Background */
            color: #ecf0f1;
            font-family: 'Arial', sans-serif;
        }

        #game-area {
            display: grid;
            border: 5px solid #27ae60; /* Green Border */
            background-color: #34495e; /* Slightly lighter dark blue */
        }

        .cell {
            width: 20px;
            height: 20px;
            box-sizing: border-box;
        }

        .snake {
            background-color: #f1c40f; /* Yellow Snake */
            border: 1px solid #e67e22;
        }

        .food {
            background-color: #e74c3c; /* Red Food */
            border-radius: 50%;
        }

        #score-board {
            margin-bottom: 20px;
            font-size: 1.5em;
            font-weight: bold;
        }
        /* --- CSS INTERNAL SELESAI --- */
    </style>
</head>
<body>

    <div id="score-board">Skor: 0</div>
    <div id="game-area">
        </div>

    <script>
        /* --- JAVASCRIPT INTERNAL DIMULAI DI SINI --- */
        const GRID_SIZE = 20;
        const GRID_DIMENSION = 20; // Papan 20x20
        const gameArea = document.getElementById('game-area');
        const scoreBoard = document.getElementById('score-board');
        let snake = [{ x: 10, y: 10 }]; // Posisi awal ular
        let food = {};
        let direction = { x: 0, y: -1 }; // Awalnya bergerak ke atas
        let score = 0;
        let gameLoop;
        let speed = 200; // Kecepatan (millidetik)

        // Mengatur grid CSS agar sesuai
        gameArea.style.gridTemplateColumns = `repeat(${GRID_DIMENSION}, 20px)`;
        gameArea.style.gridTemplateRows = `repeat(${GRID_DIMENSION}, 20px)`;

        // 1. Inisialisasi Papan Permainan
        function createGrid() {
            gameArea.innerHTML = '';
            for (let y = 0; y < GRID_DIMENSION; y++) {
                for (let x = 0; x < GRID_DIMENSION; x++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');
                    cell.id = `cell-${x}-${y}`;
                    gameArea.appendChild(cell);
                }
            }
        }

        // 2. Menempatkan Makanan secara acak
        function placeFood() {
            let newFood;
            do {
                newFood = {
                    x: Math.floor(Math.random() * GRID_DIMENSION),
                    y: Math.floor(Math.random() * GRID_DIMENSION)
                };
            } while (snake.some(segment => segment.x === newFood.x && segment.y === newFood.y));
            food = newFood;
        }

        // 3. Menggambar Ular dan Makanan
        function draw() {
            // Hapus semua kelas 'snake' dan 'food'
            document.querySelectorAll('.cell').forEach(cell => {
                cell.classList.remove('snake', 'food');
            });

            // Gambar Ular
            snake.forEach(segment => {
                const cell = document.getElementById(`cell-${segment.x}-${segment.y}`);
                if (cell) cell.classList.add('snake');
            });

            // Gambar Makanan
            const foodCell = document.getElementById(`cell-${food.x}-${food.y}`);
            if (foodCell) foodCell.classList.add('food');

            // Update Skor
            scoreBoard.textContent = `Skor: ${score}`;
        }

        // 4. Logika Pergerakan
        function move() {
            // Kepala baru
            const head = { x: snake[0].x + direction.x, y: snake[0].y + direction.y };

            // Cek Tabrakan Dinding
            if (head.x < 0 || head.x >= GRID_DIMENSION || head.y < 0 || head.y >= GRID_DIMENSION) {
                gameOver();
                return;
            }

            // Cek Tabrakan Diri Sendiri (Ular makan ekor)
            if (snake.some((segment, index) => index !== 0 && segment.x === head.x && segment.y === head.y)) {
                gameOver();
                return;
            }

            // Tambahkan kepala baru
            snake.unshift(head);

            // Cek Makan Makanan
            if (head.x === food.x && head.y === food.y) {
                score++;
                placeFood(); // Tambah makanan baru
                // Kecepatan dipercepat sedikit
                clearInterval(gameLoop);
                speed = Math.max(80, speed - 5);
                gameLoop = setInterval(gameTick, speed);
            } else {
                // Hapus ekor jika tidak makan
                snake.pop();
            }

            draw();
        }

        // 5. Mengatur Input Tombol Panah
        document.addEventListener('keydown', e => {
            const currentDirection = direction;
            switch (e.key) {
                case 'ArrowUp':
                    if (currentDirection.y === 0) direction = { x: 0, y: -1 }; // Hanya ubah jika tidak bergerak berlawanan
                    break;
                case 'ArrowDown':
                    if (currentDirection.y === 0) direction = { x: 0, y: 1 };
                    break;
                case 'ArrowLeft':
                    if (currentDirection.x === 0) direction = { x: -1, y: 0 };
                    break;
                case 'ArrowRight':
                    if (currentDirection.x === 0) direction = { x: 1, y: 0 };
                    break;
            }
        });

        // 6. Fungsi Game Over
        function gameOver() {
            clearInterval(gameLoop);
            alert(`Game Over! Skor akhir Anda: ${score}. Tekan OK untuk bermain lagi.`);
            // Reset Game
            snake = [{ x: 10, y: 10 }];
            direction = { x: 0, y: -1 };
            score = 0;
            speed = 200;
            startGame();
        }

        // 7. Tick utama game
        function gameTick() {
            move();
        }

        // 8. Memulai Game
        function startGame() {
            createGrid();
            placeFood();
            draw();
            gameLoop = setInterval(gameTick, speed);
        }

        // Panggil fungsi untuk memulai game saat halaman dimuat
        startGame();

        /* --- JAVASCRIPT INTERNAL SELESAI --- */
    </script>
</body>
  </html>
  
